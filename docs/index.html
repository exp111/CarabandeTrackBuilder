<!DOCTYPE html>
<html>
<head>
    <title>Carabande</title>
    <script src="js/include/konva.min.js"></script>
</head>
<body>
<div id="debug">
    <input id="forceShowSnapzones" type="checkbox" value="false" onchange="forceShowSnapzones(this.checked)">
    <label for="forceShowSnapzones">Show Snapzones</label>
    <button onclick="serializeTrack()">Serialize</button>
</div>
<div id="menu">
    <input id="disableSnapping" type="checkbox" value="false" onchange="disableSnapping(this.checked)">
    <label for="disableSnapping">Disable Snapping</label>
    <select id="tracks" onchange="onTrackChange(this.value)">
        <option value="" disabled selected hidden>Preset Tracks</option>
    </select>
    <button onclick="clearButton()">Clear</button>
</div>
<div id="canvas"></div>
</body>
<script src="js/vector.js"></script>
<script src="js/canvas.js"></script>
<script src="js/trackbuilder.js"></script>
<script>
    const Global = {
        forceShowSnapzones: false,
        disableSnapping: false,
        IsDebug: window.location.protocol == "file:" || window.location.hostname == "localhost",
        trackbuilder: new Trackbuilder(tracks),
    }
    debug.hidden = !Global.IsDebug;
    Global.forceShowSnapzones = Global.IsDebug;

    function forceShowSnapzones(val) {
        Global.forceShowSnapzones = val;
        toggleSnapzones(val);
    }
    function serializeTrack() {
        console.log(Global.trackbuilder.serializeTrack());
    }
    function disableSnapping(val) {
        Global.disableSnapping = val;
    }
    function onTrackChange(val) {
        clearTracks();
        Global.trackbuilder.onTrackSelect(val);
    }
    function clearButton() {
        tracks.selectedIndex = 0;
        clearTracks();
    }
    createCanvas();
    initPresets();
</script>
</html>